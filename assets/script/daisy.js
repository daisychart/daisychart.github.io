d3.selection.prototype.daisyModule=function(){return this.node().__daisyModule__},d3.selection.prototype.container=function(a){return arguments.length?(this.node().__daisyContainer__=a.node(),this):d3.select(this.node().__daisyContainer__)},d3.selection.prototype.innerSize=function(a){return arguments.length?(this.node().__daisyInnerSize__=a,this):this.node().__daisyInnerSize__},d3.daisy={},d3.daisy.default={},d3.daisy.default.font=function(){return{fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fontStyle:"normal"}},d3.daisy.default.schemeCategory10=function(){return d3.schemeCategory10},d3.daisy.default.schemeCategory20=function(){return d3.schemeCategory20},d3.daisy.default.schemeLinear2=function(){return["#c5d3e6","#4682b4"]},d3.daisy.default.locale=function(a){a=a||"ko-KR";var b={"ko-KR":{dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}},c={"ko-KR":{decimal:".",thousands:",",grouping:[3],currency:["₩",""]}};d3.timeFormatDefaultLocale(b[a]),d3.formatDefaultLocale(c[a])},d3.daisy.default.locale(),d3.daisy.layer=function(){function a(a,b,c){return c&&a.on(b,function(a){g.call(b,this,a)}),a}var b,c,d=[],e={},f=["click","mouseenter","mouseleave","mousedown","mouseup"],g=d3.dispatch.apply(this,f);return e.container=function(a){return arguments.length?("string"==typeof a&&(a=d3.select(a)),b=a,e):b},e.layer=function(a){if(arguments.length)return d.push({container:b.node(),layer:a}),e;var c=d.filter(function(a){return a.container===b.node()});return 0===d.length||0===c.length?(c=b.append("g").attr("class","layer").call(e.setDaisyModule),d.push({container:b.node(),layer:c}),c):c[0].layer},e.setDaisyModule=function(a){return a.each(function(){this.__daisyModule__=e}),a},e.setEventEmitters=function(b,c){for(var d in c)c.hasOwnProperty(d)&&b.call(a,d,c[d]);return b},e.setContainer=function(a){return a.each(function(){d3.select(this).container(b)}),a},e.defaultEvents=function(){return f},e.render=function(){},e.listeners=function(){return g},e.name=function(a){return arguments.length?(c=a,e):c},d3.daisy.utils.rebindOnMethod(e,g),e},d3.daisy.utils={rebindOnMethod:function(a,b){a.on=function(){var c=b.on.apply(b,arguments);return c===b?a:c}},setAttrDefaultFuncs:function(a,b){var c=function(c){return function(d){return arguments.length?(b[c]=d,a):b[c]}};for(var d in b)b.hasOwnProperty(d)&&!a[d]&&(a[d]=c(d))},uniqueId:function(a){return d3.selectAll("#"+a).empty()}},d3.daisy.scale=function(a){function b(){j.domain(i.domain)}function c(){var a=i.range;if(l){var b=[];a.forEach(function(a){"string"==typeof a?"width"===a?b.push(k.innerWidth()):"height"===a?b.push(k.innerHeight()):b.push(a):b.push(a)}),a=b}i.round?j.rangeRound(a):j.range(a)}function d(){i.reverse&&(i.range=i.range.reverse()),c()}function e(){"point"!==i.type&&"band"!==i.type||(i.padding&&j.padding(i.padding),i.paddingInner&&j.paddingInner(i.paddingInner),i.paddingOuter&&j.paddingOuter(i.paddingOuter))}function f(){var a="time"===i.type||"linear"===i.type||"log"===i.type;i.clamp&&a&&sclae.clamp(!0)}function g(){var a="time"===i.type||"linear"===i.type||"log"===i.type;i.nice&&a&&("log"===i.type?j.nice():j.nice(i.nice))}function h(){"ordinal"===i.type?j=d3.scaleOrdinal():"linear"===i.type?j=d3.scaleLinear():"log"===i.type?j=d3.scaleLog():"time"===i.type?j=d3.scaleTime():"point"===i.type?j=d3.scalePoint():"band"===i.type&&(j=d3.scaleBand())}var i={type:null,domain:[1,0],range:[1,0],reverse:!1,round:!1,padding:0,paddingInner:0,paddingOuter:0,defaultDomain:null,customDomain:null,clamp:!1};i.type=a||"linear";var j,k,l=!1,m=function(a){return j?(l&&c(),j(a)):void h()};return m.domain=function(a){return arguments.length?(i.domain=a,b(),m):i.domain},m.range=function(a){return arguments.length?(i.range=a,l=!1,c(),m):j.range()},m.rangeFromFrame=function(a,b){return i.range=a,k=b,l=!0,c(),m},m.frame=function(a){return k=a,m},m.reverse=function(a){return arguments.length?(i.reverse=a,d(),m):i.reverse},m.round=function(a){return arguments.length?(i.round=a,c(),m):i.round},m.padding=function(a){return arguments.length?(i.padding=a,e(),m):i.padding},m.paddingInner=function(a){return arguments.length?(i.paddingInner=a,e(),m):i.padding},m.paddingOuter=function(a){return arguments.length?(i.paddingOuter=a,e(),m):i.padding},m.clamp=function(a){return arguments.length?(i.clamp=a,f(),m):i.clamp},m.nice=function(a){return arguments.length?(i.nice=a,g(),m):i.nice},m.type=function(a){return arguments.length?(i.type=a,h(),m):i.type},m.bandwidth=function(){return"band"===i.type?j.bandwidth():NaN},m.step=function(){return"point"===i.type?j.step():NaN},m.scale=function(){return c(),j},m.customDomain=function(a){return arguments.length?(Array.isArray(a)&&a.length>0&&(i.customDomain=a,m.domain(a)),m):i.customDomain},m.invert=function(a){return j.invert(a)},d3.daisy.utils.setAttrDefaultFuncs(m,i),m},d3.daisy.transformMethods=function(){function a(a,b,c,d){function e(a,b){return"ascending"===c?a-b:b-a}function f(a,b){return"ascending"===c?a.localeCompare(b):b.localeCompare(a)}function g(a,b){var e=d.indexOf(a),f=d.indexOf(b);return"ascending"===c?e-f:f-e}c=c||"ascending";var h;return(h=d&&0!==d.length?g:"string"==typeof a?f:e)(a,b)}function b(b,c,d,e){e=e||"ascending";var f;for(f=0;f<d.length;f++){var g=a(b[d[f]],c[d[f]],e);if(0!==g)return g}return 0}function c(a){return function(b,c){return c?d3[a](b,function(a){return a[c]}):d3[a](b)}}function d(a,b,c){return c=c||"___",1==b.length?a[b[0]]:b.map(function(b){return a[b]}).join(c)}function e(a,b,c,d){return a.map(function(a){var e=a.key.split(d);e=Array.isArray(b)?d3.zip(b,e):d3.zip([b],e),e.forEach(function(b){var d=b[0],e=b[1];if("key"!==d&&"values"!==d){var f=c.get(d),g=e;"date"===f?g=new Date(g):"number"===f&&(g=+g),a[d]=g}})}),a}function f(a,b){var c=a[0][b];return"[object Date]"===Object.prototype.toString.call(c)?"date":"number"==typeof c||!isNaN(c)&&+c.toString()===c?"number":"string"}var g={};g.values=function(a){return a},g.count=function(a){return a.length};var h=["sum","mean","variance","min","max","median","deviance","extent"];h.forEach(function(a){g[a]=c(a)});var i={};return i.set=function(a,b){var c=b.field,e=[];return a.forEach(function(a){var b;b=Array.isArray(c)?d(a,c):a[c],e.indexOf(b)<0&&e.push(b)}),e},i.field=function(a,b){var c=b.field;Array.isArray(c)},i.filter=function(a,b){var c=b.condition;return Array.prototype.filter.apply(a,c)},i.nest=function(a,b){var c=b.groupby,d=(b.summarize,d3.nest());return Array.isArray(c)?c.forEach(function(a){d.key(function(b){return b[a]})}):d.key(function(a){return a[c]}),d.entries(a)},i.facet=function(a,b){var c=b.groupby,g=b.delimiter||"___",h=b.flatten!==!1;order=b.order||"natural";var i=d3.nest(),j=d3.map();Array.isArray(c)||(c=[c]),c.forEach(function(b){j.set(b,f(a,b))}),h?(i.key(function(a){var b=d(a,c,g);return b}),"ascending"===order?i.sortKeys(d3.ascending):"descending"===order&&i.sortKeys(d3.descending)):c.forEach(function(a){i.key(function(b){return b[a]}),"ascending"===order?i.sortKeys(d3.ascending):"descending"===order&&i.sortKeys(d3.descending)});var k=i.entries(a);return h&&(k=e(k,c,j,g)),k},i.aggregate=function(a,b){var c=b.summarize,j=b.groupby,k=b.flatten!==!1,l=b.delimiter||"___",m=b.order||"ascending";isSeries=b.isSeries||!1;var n=d3.nest(),o=d3.map(),p=function(a,b){return g[b.op](a,b.field)},q=function(a,b){var c={},d=function(a){var b;return b=a.as?a.as:h.indexOf(a.op)>=0?a.field+"_"+a.op:a.op};if(Array.isArray(b))b.forEach(function(b){var e=d(b);c[e]=p(a,b)});else{var e=d(b);c[e]=p(a,b)}return c};if(!j)return q(a,c);Array.isArray(j)||(j=[j]),j.forEach(function(b){o.set(b,f(a,b))}),k?n.key(function(a){return d(a,j,l)}):j.forEach(function(a){n.key(function(b){return b[a]})}),n.rollup(function(a){return q(a,c)});var r=n.entries(a),s=function(a){var b=a.map(function(a){var b={};for(var c in a.value)a.value.hasOwnProperty(c)&&(b[c]=a.value[c]);return b.key=a.key,b});return b};return k?(r=s(r),r=e(r,j,o,l),isSeries&&"natural"!==m&&i.sort(r,{orderby:j,order:m}),r):r},i.sort=function(c,d){d=d||{};var e=d.orderby,f=d.order||"ascending",g=d.orderList;return"natural"===f?c:(c.sort(function(c,d){return e?Array.isArray(e)?b(c,d,e,f,g):a(c[e],d[e],f,g):a(c,d,f,g)}),c)},i.pie=function(a,b){var c=(b.field,b.startAngle||0);endAngle=b.endAngle||2*Math.PI,order=b.order;var d=d3.pie();d=d.value(function(a){return a[b.field]}).startAngle(c).endAngle(endAngle),order?"descending"===order&&d.sortValues(function(a,b){return b-a}):d.sortValues(null);var e=d(a).map(function(a){var b=a.data;return b.layout_start=a.startAngle,b.layout_middle=.5*(a.endAngle+a.startAngle),b.layout_end=a.endAngle,b});return e},i.stack=function(a,b){var c=b.groupby,d=b.orderby,e=b.field,f=b.normalize,g=b.order,h=(b.delimiter||"___",i.facet(a,{groupby:c,flatten:!0})),j=h[0].values.length;h.forEach(function(a,b){"natural"!==g&&(a.values=i.sort(a.values,{orderby:d,order:g})),j!==a.values.length});for(var k=h.length,l=0,m=function(a){var b=function(a,b,c){var d=h[c-1].values,f=d[b];a[e]>0?(a.layout_end=f.layout_start,a.layout_start=a.layout_end+a[e]):(a.layout_start=f.layout_end,a.layout_end=a.layout_start+a[e])},c=h[a].values;0===a?c.forEach(function(a){a[e]>=0?(a.layout_end=0,a.layout_start=a[e]):(a.layout_end=a[e],a.layout_start=0)}):c.forEach(function(c,d){b(c,d,a)})},n=function(a){var b=h[a].values,c=h[k-1].values;b.forEach(function(a,b){var d=c[b];d=a[e]>=0?d.layout_start:d.layout_end,a.layout_end_normalized=a.layout_end/d,a.layout_start_normalized=a.layout_start/d})};l<k;)m(l),l+=1;if(f)for(l-=1;l>=0;)n(l),l-=1;var o=h.reduce(function(a,b){return b.values.forEach(function(a){delete a._temp_val_}),a.concat(b.values)},[]);return o},i.treemap=function(a,c){var d=c.children||"values",e=c.field,f=c.order,g=c.size||[800,600],h=c.padding||0,i=c.paddingTop||0,j=c.paddingLeft||0,k=c.paddingRight||0,l=c.paddingBottom||0,m=c.flatten,n=c.isRoot,o={};n?o=a:o[d]=a;var p=d3.hierarchy(o,function(a){return a[d]});p=p.sum(function(a){return a[e]}),f&&(p=p.sort(function(a,c){return b(a,c,["height","value"],f)}));var q=d3.treemap().size(g);c.round&&q.round(c.round),h&&q.padding(h),i&&q.paddingTop(i),j&&q.paddingLeft(j),k&&q.paddingRight(k),l&&q.paddingBottom(l);var r=q(p);return r.descendants().forEach(function(a){a.w=a.x1-a.x0,a.h=a.y1-a.y0,a.vertical=a.h>a.w}),m&&(r=r.descendants()),n||m||(r=r.children),r},i.pack=function(a,c){var d=c.children||"values",e=c.field,f=c.order,g=c.size||[800,600],h=c.padding||0,i=c.flatten,j=c.isRoot,k={};j?k=a:k[d]=a;var l=d3.hierarchy(k,function(a){return a[d]});l=l.sum(function(a){return a[e]}),f&&(l=l.sort(function(a,c){return b(a,c,["height","value"],f)}));var m=d3.pack().size(g);h&&m.padding(h);var n=m(l);return i&&(n=n.descendants()),j||i||(n=n.children),n},i.melt=function(a,b){var c=b.groupby,d=b.field;if(!Array.isArray(d))return a;var e=a.map(function(a){return d.map(function(b){var d={};return c.forEach(function(b){d[b]=a[b]}),d.__melted_key__=b,d.__melted_value__=a[b],d})});return d3.merge(e)},i.parCoords=function(a,b){var c=b.groupby,d=b.scale,e=b.prefix||"__scale_y_";return Array.isArray(c)||(c=[c]),a.map(function(a){var b=c.map(function(b){var c={};c.__layout_key__=b,c.__layout_value__=a[b],d&&(c.__layout_scaled_value__=d[e+b](a[b]));for(var f in a)a.hasOwnProperty(f)&&(c[f]=a[f]);return c});return b})},i},d3.daisy.transform=function(){function a(){return e=d,f.forEach(function(a){c(a)&&b(a)}),e}function b(a){e=d3.daisy.transformMethods()[a.name](e,a.options)}function c(a){return d3.daisy.transformMethods().hasOwnProperty(a.name)}var d,e,f=[],g=function(b){return d=b.datum(),a(),b.datum(e),b};return g.transform=function(a){return f.push(a),g},g.transforms=function(a){return arguments.length?(f=a,g):f},g.origin=function(){return d},g},d3.daisy.mark=function(){function a(a,b){var c=r.properties().enter;return c&&a.call(f,c,b),a.call(r.setEventEmitters,n.events),a.call(r.setContainer),a}function b(a,b){var c=r.properties().update;return c&&a.call(f,c,b,!0),a}function c(a,b){var c=r.properties().remove;return c&&a.call(f,c,b).remove(),a}function d(a,b){var c=r.properties().hover;if(c){var d=r.name(),e=d?"."+d:"";a.on("mouseenter"+e,function(){d3.select(this).call(f,c,b)}).on("mouseleave"+e,function(){var a=r.properties().update;a&&d3.select(this).call(f,a,b)})}}function e(a,b){var c=r.properties().hide;return c&&a.call(f,c,b),a}function f(a,b,c,d){var e=function(){var d=p[n.type];"circle"===n.type?d.forEach(function(c){b.hasOwnProperty(c)&&a.attr(c,g(c,b))}):"arc"===n.type?d.forEach(function(a){b.hasOwnProperty(a)&&c[a](g(a,b))}):"text"===n.type?(d.forEach(function(c){if(b.hasOwnProperty(c))if("text"===c){var d=function(a,c){var d=g("text",b)(a,c);return d};a.text(d)}else"textAnchor"===c?a.attr("text-anchor",g("textAnchor",b)):a.attr(c,g(c,b))}),q.forEach(function(c){if(b.hasOwnProperty(c)){var d;d="fontSize"===c?"font-size":"fontWeight"===c?"font-weight":"fontStyle"===c?"font-style":"fontFamily"===c?"font-family":c,a.style(d,g(c,b))}})):"line"!==n.type&&"area"!==n.type||d.forEach(function(a){b.hasOwnProperty(a)&&"curve"===a&&("stepped"===b[a]?c.curve(d3.curveStep):"curved"===b[a]&&c.curve(d3.curveCatmullRom))})},f=function(){o.forEach(function(c){if(b.hasOwnProperty(c)){var d;d="strokeWidth"===c?"stroke-width":"strokeOpacity"===c?"stroke-opacity":"strokeDash"===c?"stroke-dasharray":"strokeDashOffset"===c?"stroke-dashoffset":"fillOpacity"===c?"fill-opacity":"shapeRendering"===c?"shape-rendering":"strokeLinejoin"===c?"stroke-linejoin":"pointerEvents"===c?"pointer-events":c,h()?a.style(d,g(c,b,!0)):a.style(d,g(c,b))}})},i=function(){if((b.hasOwnProperty("x")||b.hasOwnProperty("y"))&&!h()){var d=function(a){return"translate("+(b.x?g("x",b)(a):0)+", "+(b.y?g("y",b)(a):0)+")"};a.attr("transform",d)}if(b.hasOwnProperty("x")&&("line"===n.type?c.x(g("x",b)):"area"===n.type&&(b.hasOwnProperty("x2")?c.x1(g("x",b)):c.x(g("x",b)))),b.hasOwnProperty("y")&&("line"===n.type?c.y(g("y",b)):"area"===n.type&&(b.hasOwnProperty("y2")?c.y1(g("y",b)):c.y(g("y",b)))),b.hasOwnProperty("x2"))if("rect"===n.type||"circle"===n.type){var e=function(a){return Math.abs(g("x2",b)(a)-g("x",b)(a))};"rect"===n.type?a.attr("width",e):a.attr("rx",e)}else"area"===n.type&&c.x0(g("x2",b));if(b.hasOwnProperty("y2"))if("rect"===n.type||"circle"===n.type){var f=function(a){return Math.abs(g("y2",b)(a)-g("y",b)(a))};"rect"===n.type?a.attr("height",f):a.attr("ry",f)}else"area"===n.type&&c.y0(g("y2",b));b.hasOwnProperty("width")&&("rect"===n.type?a.attr("width",g("width",b)):"circle"===n.type&&a.attr("rx",g("width",b))),b.hasOwnProperty("height")&&("rect"===n.type?a.attr("height",g("height",b)):"circle"===n.type&&a.attr("ry",g("height",b)))},j=function(){i(),e(),f(),c&&d&&a.attr("d",c)};return j(),a}function g(a,b,c){void 0===c&&(c=!1);var d=b[a],e=function(a){return null!==d.mult&&void 0!==d.mult&&(a*=d.mult),null!==d.offset&&void 0!==d.offset&&(a+=d.offset),"text"===n.type&&null!==d.format&&void 0!==d.format&&"number"==typeof a&&(a=d.format(a)),a};if(!d)return function(){};if(d.callback)return d.callback;if(void 0!==d.value)return d.scale?function(){return e(d.scale(d.value))}:function(){return e(d.value)};if("string"==typeof d||"number"==typeof d)return function(){return e(d)};if(d.band&&d.scale)return function(){return e(d.scale.bandwidth())};if(void 0!==d.field)return d.scale?function(a){return e(c?d.scale(a[0][d.field]):d.scale(a[d.field]))}:function(a){return e(c?a[0][d.field]:a[d.field])};if(void 0!==d.index)return d.scale?function(a,b){return e(d.scale(a[b]))}:function(a,b){return a[b]};if(Array.isArray(d)){var f="";return function(a){return d.forEach(function(b,c){f+=0===c?void 0===a[b.field]?d3.select(r.container().node().parentNode.parentNode).datum()[0][b.field]:a[b.field]:void 0===a[b.field]?", "+d3.select(r.container().node().parentNode.parentNode).datum()[0][b.field]:", "+a[b.field]}),e(f)}}return function(){return 0}}function h(){return"line"===n.type||"area"===n.type}function i(){var e;r.name();"rect"===n.type||"circle"===n.type||"text"===n.type?(l=k.selectAll(".mark").data(function(a){return a},function(a,b){return n.key?a[n.key]:b}),e=l.enter().append(n.type).attr("class","mark").call(a)):"symbol"===n.type||"arc"===n.type?(m=d3[n.type](),l=k.selectAll(".mark").data(function(a){return a},function(a,b){return n.key?a[n.key]:b}),e=l.enter().append("path").attr("class","mark").call(a,m)):h()&&(m=d3[n.type](),l=k.selectAll(".mark").data(function(a){return[a]}),e=l.enter().append("path").attr("class","mark").call(a,m)),l.exit().call(c,m),l=e.merge(l).call(b,m).call(d,m),r.name()&&l.classed(r.name(),!0)}function j(){k=r.layer(),n.data?layter.datum(n.data):k.datum(r.container().datum()),n.transform&&k.call(n.transform),i()}var k,l,m,n={key:null,type:"rect",delay:0,ease:"linear",events:{click:!0,mouseenter:!0,mouseleave:!0,mousedown:!0,mouseup:!0},data:null,properties:{enter:null,update:null,remove:null,hover:null,hide:null},transition:400,transform:null},o=["fill","opacity","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeDash","strokeDashOffset","strokeLinejoin","cursor","shapeRendering","pointerEvents"],p={circle:["r"],symbol:["type","size","shape"],arc:["innerRadius","outerRadius","startAngle","endAngle","padAngle"],area:["orient","curve","alpha","beta","tension"],line:["curve","alpha","beta","tension"],text:["text","dx","dy","rotate","textLength","lengthAdjust","textAnchor","transform"]},q=["font","fontSize","fontWeight","fontStyle","fontFamily"],r=d3.daisy.layer();return r.value=g,r.filter=function(a){return l.filter(a)},r.hideAndShow=function(a){l.call(b,m);r.filter(a).call(e,m);return r},r.type=function(a){return arguments.length?(n.type=a,r):n.type},r.render=function(){j()},["enter","update","remove","hover","hide"].forEach(function(a){r[a]=function(b){return arguments.length?(n.properties[a]=b,r):n.properties[a]}}),d3.daisy.utils.setAttrDefaultFuncs(r,n),r},d3.daisy.group=function(){function a(){g=j.layer(),j.transform()&&g.call(j.transform()),h=g.selectAll(".grouped.mark").data(function(a){return a.map(function(a){var b=a[i.field];return b||(b=a),b})},function(a){if(i.key)return a[0][i.key]}),h.exit().call(f);var a=function(a,b){a.container(b).render()};h=h.enter().append("g").attr("class","grouped mark "+(j.name()?j.name():"")).merge(h).call(c).merge(h).call(d).each(function(b,c){var d=d3.select(this);j.marks().forEach(function(b){a(b,d)}),j.tooltips().forEach(function(b){a(b,d)}),j.brushes().forEach(function(b){a(b,d)})})}function b(a,b){if(b.hasOwnProperty("x")||b.hasOwnProperty("y")){var c=function(a){return"translate("+(b.x?j.value("x",b)(a[0]):0)+", "+(b.y?j.value("y",b)(a[0]):0)+")"};a.attr("transform",c)}else b.hasOwnProperty("opacity")&&a.style("opacity",b.opacity)}function c(a){var c=j.properties().enter;return c&&a.call(b,c),a}function d(a){var c=j.properties().update;return c&&a.call(b,c),a}function e(a){var c=j.properties().hide;return c&&a.call(b,c),a}function f(a){var c=j.properties().remove;return c&&a.call(b,c).remove(),a}var g,h,i={field:"values",key:null,type:"group",width:0,height:0,clip:!1},j=d3.daisy.frame();j.type("group");return j.filter=function(a){return h.filter(a)},j.hideAndShow=function(a){h.call(d);var b=j.filter(a);return b.call(e),j},j.render=function(){return a(),j},d3.daisy.utils.setAttrDefaultFuncs(j,i),j},d3.daisy.axis=function(a){function b(){i=l.layer(),i.classed("axis",!0),l.name()&&i.classed(l.name(),!0),d(),e(),i.call(c).call(h).call(f).call(g)}function c(a){var b=[j.x,j.y];return b=b.map(function(a){return"string"==typeof a?"width"===a?l.container().innerSize()[0]:"height"===a?l.container().innerSize()[1]:a:a}),(j.zeroPoint||0===j.zeroPoint)&&(b[1]=j.zeroPoint),a.attr("transform","translate("+b+")"),a}function d(){if("top"===j.orient?h=d3.axisTop():"right"===j.orient?h=d3.axisRight():"bottom"===j.orient?h=d3.axisBottom():"left"===j.orient&&(h=d3.axisLeft()),j.grid?"left"===j.orient||"right"===j.orient?h.tickSize(-l.container().innerSize()[0]):h.tickSize(-l.container().innerSize()[1]):h.tickSize(0),"top"!==j.orient&&"bottom"!==j.orient||h.tickPadding(6),"linear"!==j.scale.type()&&"time"!==j.scale.type()||h.ticks(8),"linear"===j.scale.type()){var a=j.scale.domain();a[1]>=1e5&&Math.abs(a[1]-a[0])>=100&&h.tickFormat(d3.format(".3s"))}else"band"===j.scale.type()||"point"===j.scale.type()}function e(){h.scale(j.scale.scale()),null!==j.ticks&&h.ticks(j.ticks),null!==j.tickFormat&&h.tickFormat("time"===j.formatType?d3.timeFormat(j.tickFormat):d3.format(j.tickFormat)),null!==j.tickValues&&h.tickValues(j.tickValues),null!==j.tickSize&&h.tickSize(j.tickSize),null!==j.tickSizeOuter&&h.tickSizeOuter(j.tickSizeOuter),null!==j.tickSizeInner&&h.tickSizeInner(j.tickSizeInner),null!==j.tickPadding&&h.tickPadding(j.tickPadding)}function f(a){var b=function(a,c,d){d=d||1;var e=a.datum();"string"!=typeof e&&(e=e.toString());var f=a.node().getBBox().width;return e.length-d<j.minLabelLength||f<=c?a:void a.text(e.slice(0,e.length-d)+"…").call(b,c,d+1)},c=function(){var b=0;return a.selectAll(".tick > text").each(function(){b+=this.getBBox().width}),b},d=function(){var d,e,f,g=8;if("band"===j.scale.type()||"point"===j.scale.type()){if("top"===j.orient||"bottom"===j.orient)d="band"===j.scale.type()?j.scale.bandwidth():j.scale.step();else{var h=l.container().daisyModule().margin();d="left"===j.orient?h.left:h.right}a.selectAll(".tick > text").each(function(){d3.select(this).call(b,d-g,1)})}"top"!==j.orient&&"bottom"!==j.orient||(e=c(),f=Math.abs(j.scale.range()[1]-j.scale.range()[0]),e+j.titleOffset>=f?(a.selectAll(".tick > text").each(function(){d3.select(this).attr("transform","rotate(30)").attr("text-anchor","start")}),k=!0):k=!1,0===j.zeroPoint&&a.selectAll(".tick > text").each(function(){d3.select(this).attr("y",-12)}))};return a.selectAll("path.domain").style("visibility",j.domainVisible?"visible":"hidden").style("stroke",j.stroke),a.selectAll(".tick line").style("stroke",j.stroke).style("shape-rendering","crispEdges"),a.selectAll(".tick text").style("fill",j.stroke),d(),a}function g(a){if(j.title){var b=l.container().innerSize()[0],c=l.container().innerSize()[1],d=function(a){var c=0;a.selectAll(".tick > text").each(function(){c<this.getBBox().height&&(c=this.getBBox().height)});var d=(l.container().daisyModule().margin().bottom,c+j.titleOffset);k&&(d+=j.titleOffset);var e=a.append("text").text(j.title).attr("fill","#555").attr("font-family",j.font.fontFamily).attr("font-size",j.font.fontSize+1+"px").attr("font-weight",j.font.fontWeight);(j.zeroPoint||0===j.zeroPoint)&&l.titleAnchor("end");var f=0,g=0,h=0,i=0,m="middle";return"start"===j.titleAnchor?(h="-1em",i=".35em",m="end"):"end"===j.titleAnchor?(f=b,h="1em",i=".35em",m="start"):(f=b/2,g="bottom"===j.orient?d:-d,i="bottom"===j.orient?".71em":0),e.attr("transform","translate("+[f,g]+")").attr("dx",h).attr("dy",i).attr("text-anchor",m),a},e=function(a){var b=50,d=function(b){var c=0;return a.selectAll(".tick > text").each(function(){c<this.getBBox().width&&(c=this.getBBox().width)}),b&&(c*=Math.cos(Math.PI*b/180)),c},e=d(),f=l.container().daisyModule().margin()["left"===j.orient?"left":"right"],g=e+j.titleOffset;f<g+j.font.fontSize&&(a.selectAll(".tick > text").each(function(){d3.select(this).attr("transform","rotate("+("left"===j.orient?b:-b)+")")}),k=!0,e=d(b),g=e+j.titleOffset);var h,i,m;return"start"===j.titleAnchor?(i=0,m="-1.71em"):"end"===j.titleAnchor?(i=c,m="1.71em"):(i=c/2,m="left"===j.orient?".15em":".71em"),h="middle"===j.titleAnchor?"left"===j.orient?-g:g:0,a.append("text").text(j.title).attr("text-anchor","middle").attr("transform","translate("+[h,i]+") "+("middle"===j.titleAnchor?"rotate(-90)":"")).attr("dy",m).attr("fill","#555").attr("font-family",j.font.fontFamily).attr("font-size",j.font.fontSize+1+"px").attr("font-weight",j.font.fontWeight),a};"bottom"===j.orient||"top"===j.orient?a.call(d):"left"!==j.orient&&"right"!==j.orient||a.call(e)}}var h,i,j={orient:"bottom",x:0,y:0,scale:null,grid:!1,title:null,titleAnchor:"middle",titleOffset:14,tickFormat:null,formatType:"number",ticks:null,tickValues:null,tickSize:null,tickSizeOuter:null,tickSizeInner:null,tickPadding:null,stroke:"#999",strokeWidth:null,domainVisible:!0,minLabelLength:4,order:"back",font:d3.daisy.default.font(),zeroPoint:null},k=!1;j.orient=a||"bottom";var l=d3.daisy.layer();return l.render=function(){b()},d3.daisy.utils.setAttrDefaultFuncs(l,j),l},d3.daisy.legend=function(){function a(){j.labelHeight=j.font.fontSize;var a=k.container().innerSize();k.isHorizontal()?(j.y=a[1],j.x=0,j.width=a[0]):(j.x=a[0],j.y=0,j.height=a[1]),f=j.width-j.margin.left-j.margin.right,g=j.height-j.margin.top-j.margin.bottom,e.classed("legend",!0).attr("transform","translate("+[j.x+j.margin.left,j.y+j.margin.top]+")")}function b(){function b(){g.append("rect").attr("class","chip").attr("x",j.chipPadding).attr("y",j.chipPadding).attr("width",j.chipSize).attr("height",j.chipSize).style("fill",function(a){return j.scale(a)}),g.append("text").attr("class","label").attr("x",j.chipSize+2*j.chipPadding).attr("y",.5*j.chipSize+j.chipPadding).attr("dy",".35em").style("font-family",j.font.fontFamily).style("font-size",j.font.fontSize+"px").style("font-weight",j.font.fontWeight).text(function(a){return a.length>j.maxLabelLength?a.slice(0,j.maxLabelLength)+"…":a}),f=g.merge(f).call(c).call(k.setEventEmitters,j.events)}function d(){for(var a=j.scale.range(),b=0,c="daisy-legend-gradient-",d=c+b,e=g.append("defs").append("linearGradient");!d3.daisy.utils.uniqueId(d);)b+=1,d=c+b;h=d3.scaleLinear().domain(j.scale.domain()).range([0,j.gradientWidth]),e.attr("id",d),e.append("stop").attr("offset","0%").attr("stop-color",a[0]),e.append("stop").attr("offset","100%").attr("stop-color",a[1]),g.append("rect").attr("width",j.gradientWidth).attr("height",j.chipSize).attr("fill","url(#"+d+")"),g.append("text").attr("class","label").attr("x",function(a,b){return b*j.gradientWidth}).attr("y",j.chipSize).attr("dy","1.25em").attr("text-anchor","middle").style("fill","#999").style("font-family",j.font.fontFamily).style("font-size",j.font.fontSize+"px").style("font-weight",j.font.fontWeight).text(function(a){return a=a.toString(),a.length>j.maxLabelLength?a.slice(0,j.maxLabelLength/2)+"…":a}),g.append("text").attr("class","label-title").attr("x",j.gradientWidth+j.font.fontSize).attr("y",.5*j.chipSize).attr("dy",".35em").attr("text-anchor","start").style("font-family",j.font.fontFamily).style("font-size",j.font.fontSize+"px").style("font-weight",j.font.fontWeight).text(j.gradientTitle),f=g.merge(f)}e=k.layer(),a();var f=e.selectAll(".legend-item").data(j.scale.domain()),g=f.enter().append("g").attr("class","legend-item "+name);"ordinal"===j.scale.type()?b():"linear"===j.scale.type()&&d()}function c(a){var b=d3.local(),c=0,e=0,f=0,g=0;return a.each(function(a){var d,h,i;k.isHorizontal()?(i=d3.select(this).node().getBBox().width,c>0&&c+i>=j.width-j.labelHeight-2*j.labelPadding&&(c=0,e+=1),d=c,h=e*(j.labelHeight+j.labelPadding),b.set(this,{x:d,y:h,row:e}),h+j.labelHeight>=j.height&&(0===f&&(f=e),g<e&&(g=e),d3.select(this).classed("hidden",!0).style("display","none")),c+=i+1.5*j.labelPadding):(h=c,b.set(this,{x:0,y:h,row:e}),h+j.labelHeight>=j.height-j.labelHeight-2*j.labelPadding&&(0===f&&(f=e),g<e&&(g=e),d3.select(this).classed("hidden",!0).style("display","none")),c+=j.labelHeight+j.labelPadding,e+=1)}).attr("transform",function(a,c){return"translate("+[b.get(this).x,b.get(this).y]+")"}),f>0&&a.call(d,f,g,b),a}function d(a,b,c,d){var e=b,f=function(a){return e===b?a.classed("hidden",function(a){return"up"===a}):e>c?a.classed("hidden",function(a){return"down"===a}):a.classed("hidden",!1),a.filter(function(){return d3.select(this).classed("hidden")}).style("fill-opacity",.2).style("pointer-events","none"),a.filter(function(a,b){return!d3.select(this).classed("hidden")}).style("fill-opacity",1).style("cursor","pointer").style("pointer-events","auto"),a},g=function(a){return a.classed("hidden",function(){var a=d.get(this).row;return a<e-b||a>=e}).style("display","none"),a.filter(function(){return!d3.select(this).classed("hidden")}).style("display","inherit"),a.attr("transform",function(){var a=d.get(this).y;return a-=(e-b)*(j.labelHeight+j.labelPadding),"translate("+[d.get(this).x,a]+")"}),a},h=d3.select(a.node().parentNode),i=h.selectAll(".arrow").data(["up","down"]).enter().append("path").attr("class","arrow").attr("d",d3.symbol().type(d3.symbolTriangle).size(2.5*j.labelHeight)).attr("transform",function(a,b){var c;return c=k.isHorizontal?"translate("+[j.width-j.labelPadding-j.labelHeight,b*(j.labelPadding+j.labelHeight)+.5*j.chipSize+j.chipPadding]+")":"translate("+[j.labelPadding+j.labelHeight,j.height-(j.labelPadding+j.labelHeight)+b*(j.labelPadding+j.labelHeight)]+")",c+(1===b?"rotate(180)":"")}).style("display","block").style("fill",d3.daisy.default.schemeCategory10()[0]).call(f);return i.on("click",function(d){if("down"===d&&e<=c)e+=1;else{if(!("up"===d&&e>b))return;e-=1}i.call(f),a.call(g)}),a}var e,f,g,h,i=44,j={name:null,orient:"bottom",scale:null,x:0,y:0,width:i,height:i,tooltip:!1,margin:{top:48,right:4,bottom:20,left:4},labelHeight:12,labelPadding:4,chipSize:12,chipPadding:2,maxLabelLength:12,font:d3.daisy.default.font(),gradientTitle:null,gradientWidth:150,events:{mouseenter:!0,mouseleave:!0}},k=d3.daisy.layer();return k.orient=function(a){return arguments.length?(j.orient=a,j.x=0,j.y=0,j.width=i,j.height=i,k):j.orient},k.isHorizontal=function(){return"top"===j.orient||"bottom"===j.orient},k.showPointer=function(a,b){b=b||"value";var c=h(a[b]),d=d3.symbol().type(d3.symbolTriangle).size(40),f=e.selectAll(".legend-item").selectAll(".legend-pointer").data([c]),g=f.enter().append("path").attr("class","legend-pointer").attr("d",d).attr("fill","#777");f.merge(g).style("visibility","visible").attr("transform","translate("+c+",-5)rotate(180)")},k.hidePointer=function(){e.selectAll(".legend-pointer").style("visibility","hidden")},k.render=function(){b()},d3.daisy.utils.setAttrDefaultFuncs(k,j),k},d3.daisy.tooltip=function(){function a(){l=d3.daisy.mark().type("rect").name("background"),m=d3.daisy.mark().type("text").name("keyLabel"),n=d3.daisy.mark().type("text").name("valueLabel"),r.marks([l,m,n])}function b(){var a={};r.datum(a),p=2*q.padding+2*q.font.fontSize,k=j.selectAll(".grouped.mark.tooltip").data(function(a){return[a]}).enter().append("g").attr("class","grouped mark tooltip"+(r.name()?r.name():"")).style("pointer-events","none").style("font-size",q.font.fontSize+"px").style("font-family",q.font.fontFamily).call(f),l.enter({fill:{value:"#fff"},fillOpacity:{value:.75},height:{value:p},stroke:{value:"#ccc"},strokeWidth:{value:".5px"}}),m.enter({fontWeight:{value:"bold"},dx:{value:q.padding},y:{value:q.padding},dy:{value:".71em"}}).update({text:q.keyField}),n.enter({y:{value:q.font.fontSize+2*q.padding},dx:{value:q.padding},dy:{value:".71em"}}).update({text:q.valueField}),r.hide()}function c(){j=r.layer(),k=j.selectAll(".grouped.mark.tooltip"),k.empty()&&b()}function d(){c(),h()}function e(a,b){var c=0,d=0,e=0,f=0;if(b.hasOwnProperty("x")||b.hasOwnProperty("y")){var g=function(a){q.center&&(c=.5*o,d=.5*p);var g,h=b.x?r.value("x",b)(a[0]):0,i=b.y?r.value("y",b)(a[0]):0,j=r.layer().select(function(){return this.previousSibling});j.classed("layer label")&&(j=j.select(function(){return this.previousSibling}),g=j.select(function(){return this.firstChild}),g.classed("mark leaf label")&&(j=j.select(function(){return this.previousSibling})));var k=j.node().getBBox().width,l=j.node().getBBox().height;e=h+o-k,f=i+p-l;var m=0;return m=h+o>=k&&e<=o?"translate("+[(h?h:0)-e-c,(i?i:0)-d]+")":i+p>=l&&f<=p?"translate("+[(h?h:0)-c,(i?i:0)-f-d]+")":"translate("+[(h?h:0)-c,(i?i:0)-d]+")"};a.attr("transform",g)}}function f(a){var b=r.properties().enter;return b&&a.call(e,b),a}function g(a){var b=r.properties().update;
return b&&a.call(e,b),a}function h(){k.data([j.datum()]),l.update({width:2*q.padding}),k.each(function(a,b){var c=d3.select(this);r.marks().forEach(function(a){i(a,c,b)})}),o=k.node().getBBox().width+2*q.padding,l.update({width:{value:o}}).render(),k.call(g)}function i(a,b,c){a.container(b).render()}var j,k,l,m,n,o,p,q={keyField:null,valueField:null,padding:4,font:d3.daisy.default.font(),moveToFront:!0,center:!1},r=d3.daisy.group();return a(),r.render=function(){d()},r.datum=function(a){return arguments.length?(j.datum([a]),r):j.datum()},r.show=function(a){if(arguments.length){var b=a.container();r.container(b),c(),r.datum(a.datum())}return d(),k.style("opacity",1),r},r.hide=function(a){return arguments.length&&(r.container(a.container()),c()),k.style("opacity",0),r},r.keyField=function(a){function b(b){return"string"==typeof a?{field:b}:b}return arguments.length?(Array.isArray(a)?q.keyField=a.map(b):q.keyField=b(a),r):q.keyField},r.valueField=function(a){function b(b){return"string"==typeof a?{field:b,format:d3.format(",")}:(b.format||(b.format=d3.format(",")),b)}return arguments.length?(Array.isArray(a)?q.valueField=a.map(b):q.valueField=b(a),r):q.valueField},d3.daisy.utils.setAttrDefaultFuncs(r,q),r},d3.daisy.brush=function(a){function b(){return"x"===g.type()?d3.brushX():"y"===g.type()?d3.brushY():d3.brush()}function c(){d=g.layer(),d.classed("brush",!0),g.name()&&d.classed(g.name(),!0)}var d,e,f={type:"xy",xScale:null,yScale:null,extent:null},g=d3.daisy.layer();return a&&g.type(a),g.render=function(){c(),d.call(e)},g.hasSelection=function(){return!!d3.event.selection},g.domain=function(){return d3.event&&d3.event.selection?"x"===g.type()?d3.event.selection.map(g.xScale().invert):"y"===g.type()?d3.event.selection.map(g.yScale().invert):d3.event.selection.map(function(a){return[xScale.invert(a[0]),yScale.invert(a[1])]}):null},g.extent=function(a){return arguments.length?(f.extent=a,e&&e.extent(a),g):f.extent},g.type=function(a){return arguments.length?(f.type=a,e=b(),d3.daisy.utils.rebindOnMethod(g,e),g):f.type},d3.daisy.utils.setAttrDefaultFuncs(g,f),g},d3.daisy.frame=function(){function a(){}function b(){if(!e){var a=g.container();e=a.append("svg").append("g").attr("class","frame layer").call(g.setDaisyModule),g.layer(e)}c();var b=d3.select(e.node().parentNode).attr("width",f.width).attr("height",f.height).attr("viewBox","0 0 "+f.width+" "+f.height);g.name()&&b.classed(g.name(),!0),e.datum(g.data());var d=[0,0];f.legends.forEach(function(a){"top"===a.orient()?d[1]+=a.height():"left"===a.orient()&&(d[0]+=a.width())}),e.attr("transform","translate("+[f.margin.left+d[0],f.margin.top+d[1]]+")")}function c(){h=f.width-f.margin.left-f.margin.right,i=f.height-f.margin.top-f.margin.bottom,f.legends.forEach(function(a){a.isHorizontal()?i-=a.height():h-=a.width()}),e&&e.innerSize([h,i])}function d(){var a=function(a){a.container(e).render()};b(),g.transform()&&e.call(g.transform()),f.axes.forEach(function(b){"back"===b.order()&&a(b)}),f.marks.forEach(function(b){a(b)}),f.axes.forEach(function(b){"front"===b.order()&&a(b)}),f.legends.forEach(function(b){a(b)}),f.tooltips.forEach(function(b){a(b)}),f.brushes.forEach(function(b){a(b)})}var e,f={width:600,height:500,marks:[],legends:[],axes:[],tooltips:[],scales:[],brushes:[],margin:{top:40,right:40,bottom:48,left:55}},g=(d3.dispatch("beforesend","progress","load","error"),d3.daisy.mark());g.type("frame");var h,i;return a(),g.width=function(a){return arguments.length?(f.width=a,c(),g):f.width},g.height=function(a){return arguments.length?(f.height=a,c(),g):f.height},g.render=function(){d()},g.innerWidth=function(){return c(),h},g.innerHeight=function(){return c(),i},g.innerViewBox=function(){return[h,i]},g.axis=function(a){return f.axes.push(a),c(),g},g.brush=function(a){return f.brushes.push(a),g},g.legend=function(a){return f.legends.push(a),c(),g},g.scale=function(a){return f.scales.push(a),g},g.mark=function(a){return f.marks.push(a),g},g.tooltip=function(a){return f.tooltips.push(a),g},g.margin=function(a){if(!arguments.length)return f.margin;for(var b in a)a.hasOwnProperty(b)&&(f.margin[b]=a[b]);return g},d3.daisy.utils.setAttrDefaultFuncs(g,f),g};